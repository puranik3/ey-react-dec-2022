(this["webpackJsonpworkshops-app"]=this["webpackJsonpworkshops-app"]||[]).push([[0],{20:function(e,t,a){"use strict";var n=a(18),r=a(9),s=a.n(r);t.a={apiBaseUrl:"https://workshops-server.herokuapp.com",upvote:function(e){return s.a.put("".concat(this.apiBaseUrl,"/sessions/").concat(e,"/upvote")).then((function(e){return e.data}))},downvote:function(e){return s.a.put("".concat(this.apiBaseUrl,"/sessions/").concat(e,"/downvote")).then((function(e){return e.data}))},addSession:function(e,t){var a=Object(n.a)({},e,{workshopId:parseInt(t)});return a.sequenceId=parseInt(a.sequenceId),a.duration=parseFloat(a.duration),e.upvoteCount=0,s.a.post("".concat(this.apiBaseUrl,"/sessions"),a,{headers:{"Content-Type":"application/json"}}).then((function(e){return e.data}))}}},39:function(e,t,a){e.exports=a(71)},68:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(36),c=a.n(s),o=a(5),i=a(8);var l=function(e){return r.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},r.a.createElement("ul",{className:"nav navbar-nav"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/",activeClassName:"active",exact:!0},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"/workshops",activeClassName:"active",exact:!0},"Workshops"))))};var u=function(e){return r.a.createElement("div",{className:"jumbotron"},r.a.createElement("h1",{className:"display-3"},"Workshops App"),r.a.createElement("hr",{className:"my-2"}),r.a.createElement("p",{className:"lead"},"View details of workshops happening around you, and vote on sessions. You can check out workshops ",r.a.createElement("a",{href:"/workshops"},"here"),"."))},m=a(7),h=a.n(m),p=a(15),g=a(11),v=a(12),d=a(14),f=a(13),E=function(e){var t=e.message,a=e.theme;return r.a.createElement("div",{className:"alert alert-".concat(a," alert-dismissible fade show"),role:"alert"},r.a.createElement("button",{type:"button",className:"close","data-dismiss":"alert","aria-label":"Close"},r.a.createElement("span",{"aria-hidden":"true"},"\xd7"),r.a.createElement("span",{className:"sr-only"},"Close")),r.a.createElement("strong",null,t))},k=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e,r=[];n<=t;)r.push(n),n+=a;return r},P=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={currentPage:1},e.onPageChange=function(){e.props.onPageChange({currentPage:e.state.currentPage})},e.gotoPrevious=function(t){t.preventDefault(),e.setState((function(t){var a=t.currentPage;return e.getPaginationData().hasPrevious?{currentPage:a-1}:{}}),e.onPageChange)},e.gotoPage=function(t,a){t.preventDefault(),e.setState({currentPage:a},e.onPageChange)},e.gotoNext=function(t){t.preventDefault(),e.setState((function(t){var a=t.currentPage;return e.getPaginationData().hasNext?{currentPage:a+1}:{}}),e.onPageChange)},e}return Object(v.a)(a,[{key:"derivedPaginationData",value:function(){var e=this.props,t=e.pageSize,a=e.total;return{firstPage:Math.min(1,a/t),lastPage:0===a?-1:Math.ceil(a/t)}}},{key:"getPaginationData",value:function(){var e=this.props,t=e.pageSize,a=e.total,n=e.numPaginationItems,r=this.state.currentPage,s=this.derivedPaginationData(),c=s.firstPage,o=s.lastPage,i=Math.max(Math.floor((r-1)/n)*n+1,c),l=Math.min(i+n-1,o);return{hasPrevious:i>c,hasNext:l<o,paginationItems:k(i,l),currentPageFirst:Math.max(0,(r-1)*t+1),currentPageLast:Math.min(a,r*t),total:a}}},{key:"render",value:function(){var e=this,t=this.getPaginationData(),a=t.hasPrevious,n=t.hasNext,s=t.paginationItems,c=t.currentPageFirst,o=t.currentPageLast,i=t.total,l=this.state.currentPage,u=this.props.className;return console.log(this.getPaginationData()),r.a.createElement("div",{className:u},r.a.createElement("ul",{className:"pagination pagination-sm my-0"},a&&r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#",onClick:this.gotoPrevious},"Previous")),s.map((function(t){return r.a.createElement("li",{className:"page-item".concat(t===l?" active":""),key:t},r.a.createElement("a",{className:"page-link",href:"#",onClick:function(a){return e.gotoPage(a,t)}},t))})),n&&r.a.createElement("li",{className:"page-item"},r.a.createElement("a",{className:"page-link",href:"#",onClick:this.gotoNext},"Next"))),r.a.createElement("small",{className:"text-muted"},"Showing ",c," - ",o," of ",i))}},{key:"componentDidMount",value:function(){this.gotoPage({preventDefault:function(){}},this.state.currentPage)}}]),a}(n.Component);P.defaultProps={pageSize:10,onPageChange:function(){}};var N=P,w=a(16),b=a.n(w),S=a(9),O=a.n(S),y={apiBaseUrl:"https://workshops-server.herokuapp.com",getWorkshops:function(){return O.a.get("".concat(this.apiBaseUrl,"/workshops")).then((function(e){return e.data}))},getWorkshopsByPage:function(e,t){return O.a.get("".concat(this.apiBaseUrl,"/workshops?_page=").concat(e,"&_limit=").concat(t)).then((function(e){return console.log(e.headers),{workshops:e.data,total:parseInt(e.headers["x-total-count"])}}))},getWorkshopById:function(e,t){var a=t?{params:{_embed:"sessions"}}:{};return O.a.get("".concat(this.apiBaseUrl,"/workshops/").concat(e),a).then((function(e){return e.data}))}},D=(a(68),function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={showDescriptions:!0,total:0,currentPage:1},e.pageSize=2,e.numPaginationItems=2,e.toggleDescriptions=function(){e.setState((function(e){return{showDescriptions:!e.showDescriptions}}))},e.onPageChange=function(t){var a=t.currentPage;e.setState({currentPage:a})},e}return Object(v.a)(a,[{key:"getPaginationData",value:function(){return{total:this.state.total,currentPage:this.state.currentPage,pageSize:this.pageSize,numPaginationItems:this.numPaginationItems,onPageChange:this.onPageChange}}},{key:"render",value:function(){var e=this.state,t=e.status,a=e.workshops,n=e.error,s=e.showDescriptions,c=null;switch(t){case"FETCHING_WORKSHOPS":c=r.a.createElement(E,{theme:"primary",message:"We are fetching list of workshops. Hang on!"});break;case"FETCHED_WORKSHOPS":c=r.a.createElement("div",{className:"row"},a.map((function(e){return r.a.createElement("div",{className:"col-4 d-flex",key:e.id},r.a.createElement(o.b,{to:"/workshops/".concat(e.id),className:"text-reset text-decoration-none w-100 my-3 d-flex flex-column"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"card-body"},r.a.createElement("div",{className:"card-img-container d-flex flex-column justify-content-center"},r.a.createElement("img",{className:"card-img-top w-50 d-block mx-auto",src:e.imageUrl,alt:e.description})),r.a.createElement("h4",{className:"card-title"},e.name),r.a.createElement("div",{className:"card-text"},r.a.createElement("div",null,r.a.createElement(b.a,{interval:0,format:"MMM D YYYY"},e.startDate)," - ",r.a.createElement(b.a,{interval:0,format:"MMM D YYYY"},e.endDate)),r.a.createElement("div",null,r.a.createElement("span",null,e.time)),s&&r.a.createElement("div",{className:"my-3",dangerouslySetInnerHTML:{__html:e.description}}))))))})));break;case"ERROR_FETCHING_WORKSHOPS":c=r.a.createElement(E,{theme:"danger",message:n.message});break;default:c=null}return r.a.createElement("div",null,r.a.createElement("div",{className:"clearfix"},r.a.createElement("h1",null,"Workshops",r.a.createElement("div",{className:"float-right"},r.a.createElement("button",{className:"btn btn-sm btn-primary",onClick:this.toggleDescriptions},s?"Hide details":"Show details")))),r.a.createElement("hr",null),r.a.createElement("div",{className:"col-12 clearfix"},r.a.createElement(N,Object.assign({},this.getPaginationData(),{className:"float-right mb-2"}))),c)}},{key:"fetchWorkshops",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a,n,r;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:"FETCHING_WORKSHOPS"}),e.prev=1,t=this.getPaginationData(),e.next=5,y.getWorkshopsByPage(t.currentPage,t.pageSize);case 5:a=e.sent,n=a.workshops,r=a.total,this.setState({status:"FETCHED_WORKSHOPS",workshops:n,total:r}),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(1),this.setState({status:"ERROR_FETCHING_WORKSHOPS",error:e.t0});case 14:case"end":return e.stop()}}),e,this,[[1,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:this.fetchWorkshops();case 1:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){var e=Object(p.a)(h.a.mark((function e(t,a){return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.currentPage!==this.state.currentPage&&this.fetchWorkshops();case 1:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()}]),a}(n.Component)),C=a(23),x=a(18),I=a(20),H=r.a.lazy((function(){return Promise.all([a.e(3),a.e(5)]).then(a.bind(null,79))})),_=r.a.lazy((function(){return a.e(4).then(a.bind(null,78))})),j=function(e){Object(d.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(g.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={},e.onVoteChange=function(t,a){e.setState((function(e){return{workshop:Object(x.a)({},e.workshop,{sessions:[].concat(Object(C.a)(e.workshop.sessions.slice(0,t)),[a],Object(C.a)(e.workshop.sessions.slice(t+1)))})}}))},e.upvote=function(t){return I.a.upvote(e.state.workshop.sessions[t].id).then((function(a){return e.onVoteChange(t,a)})).catch((function(e){return alert("Something went wrong while registering the vote (".concat(e.message,")"))}))},e.downvote=function(t){return I.a.downvote(e.state.workshop.sessions[t].id).then((function(a){return e.onVoteChange(t,a)})).catch((function(e){return alert("Something went wrong while registering the vote (".concat(e.message,")"))}))},e}return Object(v.a)(a,[{key:"render",value:function(){var e=this,t=this.state,a=t.status,s=t.workshop,c=t.error,l=null;switch(a){case"FETCHING_WORKSHOP_DETAILS":l=r.a.createElement(E,{theme:"primary",message:"We are fetching details of the workshop. Hang on!"});break;case"FETCHED_WORKSHOP_DETAILS":l=r.a.createElement("div",null,r.a.createElement("h2",null,s.name),r.a.createElement("hr",null),r.a.createElement("div",{className:"row my-4"},r.a.createElement("div",{className:"col-4"},r.a.createElement("img",{className:"img-fluid",src:s.imageUrl,alt:s.description})),r.a.createElement("div",{className:"col-8"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-3"},r.a.createElement("p",null,r.a.createElement("small",null,r.a.createElement(b.a,{interval:0,format:"MMM D YYYY"},s.startDate)," - ",r.a.createElement(b.a,{interval:0,format:"MMM D YYYY"},s.endDate))),r.a.createElement("p",null,r.a.createElement("small",{className:"text-muted"},s.time))),r.a.createElement("div",{className:"col-3"},r.a.createElement("p",null,r.a.createElement("i",{className:"fa ".concat(s.modes.online?"fa-check":"fa-times")}),r.a.createElement("small",null,"Online")),r.a.createElement("p",null,r.a.createElement("i",{className:"fa ".concat(s.modes.inPerson?"fa-check":"fa-times")}),r.a.createElement("small",null,"In person")))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-12",dangerouslySetInnerHTML:{__html:s.description}})))),r.a.createElement("ul",{className:"nav nav-tabs"},r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:this.props.match.url,activeClassName:"active",exact:!0},"Sessions")),r.a.createElement("li",{className:"nav-item"},r.a.createElement(o.c,{className:"nav-link",to:"".concat(this.props.match.url,"/add"),activeClassName:"active",exact:!0},"Add a session"))),r.a.createElement(n.Suspense,{fallback:r.a.createElement("div",null,"Loading...")},r.a.createElement(i.a,{exact:!0,path:this.props.match.path,render:function(t){return r.a.createElement(H,Object.assign({sessions:s.sessions,upvote:e.upvote,downvote:e.downvote},t))}}),r.a.createElement(i.a,{path:"".concat(this.props.match.path,"/add"),component:_})));break;case"ERROR_FETCHING_WORKSHOP_DETAILS":l=r.a.createElement(E,{theme:"danger",message:c.message});break;default:l=null}return l}},{key:"componentDidMount",value:function(){var e=Object(p.a)(h.a.mark((function e(){var t,a;return h.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({status:"FETCHING_WORKSHOP_DETAILS"}),e.prev=1,t=this.props.match.params.id,e.next=5,y.getWorkshopById(t,!0);case 5:a=e.sent,this.setState({status:"FETCHED_WORKSHOP_DETAILS",workshop:a}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),this.setState({status:"ERROR_FETCHING_WORKSHOP_DETAILS",error:e.t0});case 12:case"end":return e.stop()}}),e,this,[[1,9]])})));return function(){return e.apply(this,arguments)}}()}]),a}(n.Component);var M=function(){return r.a.createElement("div",null,r.a.createElement(l,null),r.a.createElement("div",{className:"container my-4"},r.a.createElement(i.c,null,r.a.createElement(i.a,{path:"/workshops/:id",component:j}),r.a.createElement(i.a,{path:"/workshops",component:D}),r.a.createElement(i.a,{path:"/",component:u}))))};a(69),a(70);c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,null,r.a.createElement(M,null))),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.f2971a19.chunk.js.map